"use strict";(self.webpackChunkbrewjs_for_react_router_example=self.webpackChunkbrewjs_for_react_router_example||[]).push([[6646],{6646:function(e,n,r){r.r(n),r.d(n,{default:function(){return u}});var t=r(2556),o=r(9357),s=r(4050),i=r(3967),a=r(4519);function c(){var e=(0,o.Gc)({},{preventLeave:!0});return(0,a.useEffect)((function(){e.on("beforeLeave",(function(){if(!e.data.allowLeaving)return Promise.reject()}))}),[e]),(0,a.useEffect)((function(){setTimeout((function(){e.element().nextElementSibling.textContent="Lock is ".concat(i.ZP.locked()?"on":"off")}))})),(0,t.jsxs)("div",Object.assign({className:"app-demo-form-col2"},{children:[(0,t.jsxs)(o.l0,Object.assign({context:e},{children:[(0,t.jsx)(s.ZD,{name:"allowLeaving",label:"Allow leaving"}),(0,t.jsx)(s.oi,{name:"item"}),(0,t.jsx)(s.zx,{type:"reset",label:"Reset"})]})),(0,t.jsx)("div",{})]}))}var l='import { Form, useFormContext } from "zeta-dom-react";\r\nimport { Button, TextInput, Toggle } from "src/components/controls";\r\nimport dom from "zeta-dom/dom";\r\nimport { useEffect } from "react";\r\n\r\nexport default function Component() {\r\n    const form = useFormContext({}, { preventLeave: true });\r\n\r\n    useEffect(() => {\r\n        form.on(\'beforeLeave\', () => {\r\n            if (!form.data.allowLeaving) {\r\n                return Promise.reject();\r\n            }\r\n        });\r\n    }, [form]);\r\n\r\n    useEffect(() => {\r\n        setTimeout(() => {\r\n            const formElement = form.element()!;\r\n            formElement.nextElementSibling!.textContent = `Lock is ${dom.locked() ? \'on\' : \'off\'}`;\r\n        });\r\n    });\r\n\r\n    return (\r\n        <div className="app-demo-form-col2">\r\n            <Form context={form}>\r\n                <Toggle name="allowLeaving" label="Allow leaving" />\r\n                <TextInput name="item" />\r\n                <Button type="reset" label="Reset" />\r\n            </Form>\r\n            <div></div>\r\n        </div>\r\n    );\r\n}\r\n',m=r(6119);function d(){return(0,t.jsx)(m.iV,{component:c,source:{tsx:l},maxHeight:"none"})}function f(e){const n=Object.assign({h1:"h1",p:"p",code:"code",strong:"strong"},e.components),{Module:r}=n;return r||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Module",!0),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r,{name:"zeta-dom-react"}),"\n",(0,t.jsx)(n.h1,{children:"Preventing from leaving"}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"preventLeave"})," form option can be used to prevent user to navigate away unintentedly."]}),"\n",(0,t.jsx)(n.p,{children:"By turning on the option, user will be prompted by browser when user is trying the leaving the page\r\nafter updating any field."}),"\n",(0,t.jsxs)(n.p,{children:["For in-app navigation, the application is required to handle the prompting manually.\r\nRegister an event handler to ",(0,t.jsx)(n.code,{children:"beforeLeave"})," event and return a promise that ",(0,t.jsx)(n.strong,{children:"resolved"})," when user has accepted to leave,\r\nor ",(0,t.jsx)(n.strong,{children:"rejected"})," when user has declined."]}),"\n",(0,t.jsx)(n.p,{children:"The lock will be released when the form is reset."}),"\n",(0,t.jsx)(d,{})]})}var u=function(e={}){const{wrapper:n}=e.components||{};return n?(0,t.jsx)(n,Object.assign({},e,{children:(0,t.jsx)(f,e)})):f(e)}}}]);