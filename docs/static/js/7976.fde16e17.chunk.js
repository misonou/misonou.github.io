"use strict";(self.webpackChunkbrewjs_for_react_router_example=self.webpackChunkbrewjs_for_react_router_example||[]).push([[7976],{7976:function(r,e,n){n.r(e);var s=n(2556);function c(r){const e=Object.assign({h1:"h1",p:"p",code:"code",a:"a",h3:"h3",pre:"pre",h4:"h4",h2:"h2",blockquote:"blockquote",del:"del",ul:"ul",li:"li",strong:"strong"},r.components),{Module:n,MemberList:c,VersionTimeline:o}=e;return c||d("MemberList",!0),n||d("Module",!0),o||d("VersionTimeline",!0),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n,{name:"zeta-dom-react"}),"\n",(0,s.jsx)(e.h1,{children:"ErrorHandler interface"}),"\n",(0,s.jsxs)(e.p,{children:["The ",(0,s.jsx)(e.code,{children:"ErrorHandler"})," object is created by ",(0,s.jsx)(e.a,{href:":",children:(0,s.jsx)(e.code,{children:"createErrorHandler"})})," or ",(0,s.jsx)(e.a,{href:":",children:(0,s.jsx)(e.code,{children:"useErrorHandler"})}),"."]}),"\n",(0,s.jsx)(c,{i:"ErrorHandler",im:["emit()","catch()"]}),"\n",(0,s.jsx)(e.h3,{children:(0,s.jsx)(e.code,{children:"ErrorHandler.catch()"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-javascript",children:"catch(handler)\r\ncatch(code, handler)\r\ncatch(type, handler)\n"})}),"\n",(0,s.jsxs)(e.p,{children:["Catches errors from promises registered to descandant elements by ",(0,s.jsx)(e.a,{href:":",children:(0,s.jsx)(e.code,{children:"notifyAsync"})}),".\r\nUnfiltered handlers are called after filtered handlers, registered by other overloads, regardless of order."]}),"\n",(0,s.jsxs)(e.p,{children:["If handler returns a value other than ",(0,s.jsx)(e.code,{children:"undefined"}),", including promises resolving to whatever values,\r\nthe error is marked as handled and no further handlers are called nor will be propagated up the DOM tree."]}),"\n",(0,s.jsx)(e.h3,{children:"Parameters"}),"\n",(0,s.jsxs)("dl",{children:[(0,s.jsx)(e.h4,{children:(0,s.jsx)(e.code,{children:"handler"})}),(0,s.jsx)(e.p,{children:"Callback to be invoked."}),(0,s.jsx)(e.h4,{children:(0,s.jsx)(e.code,{children:"code"})}),(0,s.jsx)(e.p,{children:"Value to be matched against."}),(0,s.jsx)(e.h4,{children:(0,s.jsx)(e.code,{children:"type"})}),(0,s.jsx)(e.p,{children:"Constructor of a specific error type."})]}),"\n",(0,s.jsx)(e.h3,{children:(0,s.jsx)(e.code,{children:"ErrorHandler.emit()"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-javascript",children:"emit(error)\n"})}),"\n",(0,s.jsxs)(e.p,{children:["Emits error to handlers registered by ",(0,s.jsx)(e.a,{href:":",children:(0,s.jsx)(e.code,{children:"ErrorHandler.catch"})}),".\r\nIf the error is not marked as handled, the error will propagate up the DOM tree."]}),"\n",(0,s.jsx)(e.h3,{children:"Parameters"}),"\n",(0,s.jsxs)("dl",{children:[(0,s.jsx)(e.h4,{children:(0,s.jsx)(e.code,{children:"error"})}),(0,s.jsx)(e.p,{children:"Error to handle."})]}),"\n",(0,s.jsx)(e.h3,{children:"Return value"}),"\n",(0,s.jsx)(e.p,{children:"A promise that resolves to possible output returned from handlers."}),"\n",(0,s.jsx)(e.h2,{children:"Handling specific errors"}),"\n",(0,s.jsx)(e.p,{children:"Error handler also provides selective registration of handler callbacks, so that different error can be handled differently:"}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"Note that an unselective handler callback are always invoked after all selective handler callbacks."}),"\n"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-tsx",children:"function Component() {\r\n    const [data, state] = useAsync(() => { /* ... */ });\r\n    const errorHandler = useErrorHandler(state);\r\n\r\n    useEffect(() => {\r\n        return combineFn(\r\n            // this catches all errors of the type from CustomError\r\n            errorHandler.catch(CustomError, err => { /* ... */ }),\r\n            // this catches all errors with the specified code\r\n            errorHandler.catch('zeta/cancelled', err => { /* ... */ }),\r\n            // as the default case\r\n            errorHandler.catch(err => { /* ... */ })\r\n        );\r\n    }, [errorHandler]);\r\n\r\n    return (<div ref={errorHandler.ref}>{/* ... */}</div>);\r\n}\n"})}),"\n",(0,s.jsxs)(e.p,{children:["Sinve v0.4.2, it is possible to specify multiple codes or constructors in one ",(0,s.jsx)(e.code,{children:"catch"})," call:"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-tsx",children:"useEffect(() => {\r\n    return errorHandler.catch(['zeta/cancelled', CustomError], err => { /* ... */ });\r\n}, [errorHandler]);\n"})}),"\n",(0,s.jsxs)(e.h2,{children:["Emitting errors ",(0,s.jsx)(e.del,{children:"0.4.4"})]}),"\n",(0,s.jsxs)(e.p,{children:["Asynchronous error can now be dispatched to error handler of the current or parent components using ",(0,s.jsx)(e.code,{children:"errorHandler.emit"}),"."]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-tsx",children:"function Component() {\r\n    const errorHandler = useErrorHandler(state);\r\n\r\n    useEffect(() => {\r\n        someAsyncAction().catch(err => errorHandler.emit(err));\r\n    }, []);\r\n\r\n    return (\r\n        <div ref={errorHandler.ref}>{/* ... */}</div>\r\n    );\r\n}\n"})}),"\n",(0,s.jsxs)(e.p,{children:["Prior to v0.4.4, The error can be emitted directly through ",(0,s.jsx)(e.code,{children:"dom.emit"}),":"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-tsx",children:"function Component() {\r\n    const ref = useRef();\r\n\r\n    useEffect(() => {\r\n        someAsyncAction().catch(error => {\r\n            dom.emit('error', ref.current, { error }, true);\r\n        });\r\n    }, []);\r\n\r\n    return (\r\n        <div ref={ref}>{/* ... */}</div>\r\n    );\r\n}\n"})}),"\n",(0,s.jsx)(e.h2,{children:"Version information"}),"\n",(0,s.jsx)(o,{module:"zeta-dom-react",children:(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"0.3.2"})," Introduced"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"0.4.4"})," ",(0,s.jsx)(e.code,{children:"ErrorHandler.emit()"})]}),"\n"]})})]})}function d(r,e){throw new Error("Expected "+(e?"component":"object")+" `"+r+"` to be defined: you likely forgot to import, pass, or provide it.")}e.default=function(r={}){const{wrapper:e}=r.components||{};return e?(0,s.jsx)(e,Object.assign({},r,{children:(0,s.jsx)(c,r)})):c(r)}}}]);