"use strict";(self.webpackChunkbrewjs_for_react_router_example=self.webpackChunkbrewjs_for_react_router_example||[]).push([[5649],{5649:function(e,t,r){r.r(t),r.d(t,{default:function(){return y}});var a=r(2556),n=r(882),o=r(6502),s=r(5465),c=r(2192),i=r(7749),p=r(6122),d=r(4519),u=function(){return u=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},u.apply(this,arguments)},l=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(r[a[n]]=e[a[n]])}return r};function h(){var e=(0,n.N)({productType:""},"contact","asc",10),t=(0,p.Wd)({productType:"",page:"1"},!0),r=t[0],h=t[1];(0,d.useMemo)((function(){var t=r.page,a=l(r,["page"]);e.filters=a,e.pageIndex=(+t||1)-1}),[r]),(0,d.useEffect)((function(){return e.on("viewChange",(function(){h(u(u({},e.filters),{page:String(e.pageIndex+1)}))}))}),[e]);var g=e.getView(s,(function(t,r){return r.productType&&(t=t.filter((function(e){return e.productType===r.productType}))),e.sort(t)}))[0];return(0,a.jsxs)("div",{children:[(0,a.jsx)("div",u({className:"table-filter"},{children:(0,a.jsx)(c.Lt,{label:"Product Type",items:["","Desktop","Laptop","Tablet"],allowUnselect:!0,variant:"button",value:e.filters.productType,onChange:function(t){return e.filters.productType=t}})})),(0,a.jsxs)("table",u({className:"app-demo-view-table"},{children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"Name"}),(0,a.jsx)("th",{children:"Product ID"}),(0,a.jsx)("th",{children:"Product Type"})]})}),(0,a.jsx)("tbody",{children:g.map((function(e,t){return(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:e.contact}),(0,a.jsx)("td",{children:e.productId}),(0,a.jsx)("td",{children:e.productType})]},t)}))})]})),(0,a.jsxs)("div",u({className:"table-footer"},{children:[(0,a.jsxs)("div",{children:[e.itemCount," items"]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("i",u({className:(0,o.AK)({disabled:0===e.pageIndex}),onClick:function(){return e.pageIndex--}},{children:"Prev"})),(0,i.rx)(" ",e.pageCount).split("").map((function(t,r){return(0,a.jsx)("i",u({className:(0,o.AK)({active:r===e.pageIndex}),onClick:function(){return e.pageIndex=r}},{children:r+1}),r)})),(0,a.jsx)("i",u({className:(0,o.AK)({disabled:e.pageIndex===e.pageCount-1}),onClick:function(){return e.pageIndex++}},{children:"Next"}))]})]}))]})}var g="import { classNames, useDataView } from \"zeta-dom-react\";\r\nimport data from \"src/data/examples/sales.json\";\r\nimport { Dropdown } from \"src/components/controls\";\r\nimport { repeat } from \"zeta-dom/util\";\r\nimport { useQueryParam } from \"brew-js-react\";\r\nimport { useEffect, useMemo } from \"react\";\r\nimport \"./style.css\";\r\n\r\nexport default function Component() {\r\n    const dataView = useDataView({ productType: '' }, 'contact', 'asc', 10);\r\n\r\n    const [params, setParams] = useQueryParam({ productType: '', page: '1' },\r\n        // enable snapshotOnUpdate so that use can navigate back\r\n        // to previous state through history\r\n        true);\r\n\r\n    useMemo(() => {\r\n        // update data view when query string changes\r\n        const { page, ...filters } = params;\r\n        dataView.filters = filters;\r\n        dataView.pageIndex = (+page || 1) - 1;\r\n    }, [params]);\r\n\r\n    useEffect(() => {\r\n        // update query string view when view changes\r\n        return dataView.on('viewChange', () => {\r\n            setParams({\r\n                ...dataView.filters,\r\n                page: String(dataView.pageIndex + 1),\r\n            });\r\n        });\r\n    }, [dataView]);\r\n\r\n    const [pageItems] = dataView.getView(data, (items, filters) => {\r\n        if (filters.productType) {\r\n            items = items.filter(v => v.productType === filters.productType);\r\n        }\r\n        return dataView.sort(items);\r\n    });\r\n\r\n    return (\r\n        <div>\r\n            {/* Filter controls */}\r\n            <div className=\"table-filter\">\r\n                <Dropdown label=\"Product Type\" items={['', 'Desktop', 'Laptop', 'Tablet']} allowUnselect variant=\"button\"\r\n                    value={dataView.filters.productType}\r\n                    onChange={v => dataView.filters.productType = v} />\r\n            </div>\r\n\r\n            {/* Table */}\r\n            <table className=\"app-demo-view-table\">\r\n                <thead>\r\n                    <tr>\r\n                        <th>Name</th>\r\n                        <th>Product ID</th>\r\n                        <th>Product Type</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    {pageItems.map((v, i) => (\r\n                        <tr key={i}>\r\n                            <td>{v.contact}</td>\r\n                            <td>{v.productId}</td>\r\n                            <td>{v.productType}</td>\r\n                        </tr>\r\n                    ))}\r\n                </tbody>\r\n            </table>\r\n\r\n            {/* Simple pagination */}\r\n            <div className=\"table-footer\">\r\n                <div>{dataView.itemCount} items</div>\r\n                <div>\r\n                    <i className={classNames({ disabled: dataView.pageIndex === 0 })} onClick={() => dataView.pageIndex--}>Prev</i>\r\n                    {repeat(' ', dataView.pageCount).split('').map((v, i) => (\r\n                        <i key={i} className={classNames({ active: i === dataView.pageIndex })} onClick={() => dataView.pageIndex = i}>{i + 1}</i>\r\n                    ))}\r\n                    <i className={classNames({ disabled: dataView.pageIndex === dataView.pageCount - 1 })} onClick={() => dataView.pageIndex++}>Next</i>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n",m=r(9596);function f(){return(0,a.jsx)(m.iV,{component:h,source:{tsx:g},maxHeight:"none"})}function x(e){const t=Object.assign({h1:"h1",del:"del",p:"p",h2:"h2",pre:"pre",code:"code",h3:"h3",h4:"h4",blockquote:"blockquote"},e.components),{Module:r,ImportHint:n,Badge:o}=t;return o||v("Badge",!1),o.Optional||v("Badge.Optional",!0),n||v("ImportHint",!0),r||v("Module",!0),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r,{name:"brew-js-react"}),"\n",(0,a.jsxs)(t.h1,{children:["useQueryParam ",(0,a.jsx)(t.del,{children:"0.6.0"})]}),"\n",(0,a.jsx)(t.p,{children:"Returns value of the specified parameter in query string, and a function to update it."}),"\n",(0,a.jsx)(t.h2,{children:"Syntax"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-javascript",children:"useQueryParam(name, defaultValue)\r\nuseQueryParam(name, defaultValue, snapshotOnUpdate)\r\nuseQueryParam(dict)\r\nuseQueryParam(dict, snapshotOnUpdate)\n"})}),"\n",(0,a.jsx)(n,{name:"useQueryParam",module:"brew-js-react",require:"useQueryParam",global:"brew.react.useQueryParam"}),"\n",(0,a.jsx)(t.h3,{children:"Parameters"}),"\n",(0,a.jsxs)("dl",{children:[(0,a.jsx)(t.h4,{children:(0,a.jsx)(t.code,{children:"name"})}),(0,a.jsx)(t.p,{children:"Name of the parameter."}),(0,a.jsx)(t.h4,{children:(0,a.jsx)(t.code,{children:"defaultValue"})}),(0,a.jsx)(t.p,{children:"Default value when the specified parameter is not present in query string."}),(0,a.jsx)(t.h4,{children:(0,a.jsx)(t.code,{children:"dict"})}),(0,a.jsx)(t.p,{children:"A dictionary containing parameter names and associated default values."}),(0,a.jsxs)(t.h4,{children:[(0,a.jsx)(t.code,{children:"snapshotOnUpdate"})," ",(0,a.jsx)(o.Optional,{})]}),(0,a.jsxs)(t.p,{children:["Whether to create snapshot in browser's history when query parameter is updated. Default is ",(0,a.jsx)(t.code,{children:"false"}),"."]})]}),"\n",(0,a.jsx)(t.h2,{children:"Return value"}),"\n",(0,a.jsxs)("dl",{children:[(0,a.jsx)(t.h4,{children:(0,a.jsx)(t.code,{children:"[value, updateValue]"})}),(0,a.jsxs)(t.p,{children:["When ",(0,a.jsx)(t.code,{children:"name"})," is supplied as argument, it returns the current value of the specified parameter in query string,\r\nand a function to update that parameter."]}),(0,a.jsx)(t.h4,{children:(0,a.jsx)(t.code,{children:"[readOnlyDict, updateValues]"})}),(0,a.jsxs)(t.p,{children:["When ",(0,a.jsx)(t.code,{children:"dict"})," is supplied as argument, it returns a read-only dictionary containing values of the specified parameter in query string,\r\nand a function to update parameters."]}),(0,a.jsx)(t.p,{children:"The update function always performs partial update, meaning that unsupplied parameters are unchanged."})]}),"\n",(0,a.jsxs)(t.blockquote,{children:["\n",(0,a.jsx)(t.p,{children:"To clear a parameter in query string, pass empty string to that parameter.\r\nIt will be re-populated with default value in next render."}),"\n"]}),"\n",(0,a.jsxs)(t.blockquote,{children:["\n",(0,a.jsx)(t.p,{children:"Update function has no effect when parent view container is going to unmount due to navigation."}),"\n"]}),"\n",(0,a.jsx)(t.h2,{children:"Example"}),"\n",(0,a.jsx)(t.p,{children:"The following example links data view to query string parameters."}),"\n",(0,a.jsx)(f,{})]})}var y=function(e={}){const{wrapper:t}=e.components||{};return t?(0,a.jsx)(t,Object.assign({},e,{children:(0,a.jsx)(x,e)})):x(e)};function v(e,t){throw new Error("Expected "+(t?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},882:function(e,t,r){r.d(t,{N:function(){return g}});var a=r(4519),n=r(6770),o=r(7749),s=r(1266),c=r(2674),i=(0,o.D8)(),p=h.prototype,d=new n.pF;function u(e,t){var r=(0,o.Jp)(e)&&-1,a=(0,o.Jp)(t)&&1;return r||a?r+a:"string"===typeof e||"string"===typeof t?String(e).localeCompare(t,void 0,{caseFirst:"upper"}):e-t}function l(e,t,r){i(e).setPageCount(Math.ceil(r/(t||r||1)))}function h(e,t,r,a){var n=this,s={filters:(0,o.l7)({},e),sortBy:t,sortOrder:r||t&&"asc",itemCount:null,pageIndex:0,pageSize:void 0===a?h.pageSize:a},c=i(n,{setPageCount:(0,o.aU)(n,"pageCount",0,!0),defaults:s,items:[]}),p=function(){d.emit("viewChange",n)},u=function(e){var t=this!==n,r=t||(0,o.Zr)(e.newValues,(function(e,t){return"pageCount"!==t&&"itemCount"!==t}));c.sorted=c.items.length?void 0:[],t&&(c.filtered=c.sorted),n.pageIndex=t||!(0,o.nr)(e.newValues,"pageIndex")?0:n.pageIndex,r&&(0,o.lb)(p)};e=(0,o.l7)(n,s).filters;for(var l in c.callback=(0,o.YP)(e,!1),(0,o.YP)(n,u),(0,o.YP)(n.filters,u),e)(0,o.aU)(e,l);(0,o.vV)(e)}function g(e,t,r,n,i){if("string"!==typeof e)return g("__dataView",e,t,r,n);var p=(0,c.F)(e),d=(0,s.Rk)(),u=(0,a.useState)((function(){return new h(t,r,n,i).reset(p.get())}))[0];return(0,a.useEffect)((function(){return(0,o.kV)(u.on("viewChange",(function(){p.set(u.toJSON()),d()})),p.onPopState?p.onPopState((function(e){p.set(u.toJSON()),u.reset(e)})):o.ZT)}),[u]),u}(0,o.Ou)(h,{pageSize:0}),(0,o.r9)(h,{on:function(e,t){return d.add(this,e,t)},getView:function(e,t){var r=this,a=i(r),n=r.pageIndex||0,o=r.pageSize||0;e!==a.items&&(a.items=e||[],a.filtered=a.items.length?void 0:[],a.sorted=a.filtered),t=t||function(e){return r.sort(e)};var s=a.sorted||(a.sorted=t.call(r,a.filtered||a.items,r.filters,r.sortBy,r.sortOrder)||[]);return a.filtered=s,e&&(r.itemCount=s.length),[s.slice(n*o,o?(n+1)*o:void 0),s.length]},sort:function(e,t){if(e=(0,o.VL)(e),!(0,o.mf)(t)){var r=t||this.sortBy;if(!r)return e;t=function(e){return e[r]}}var a="desc"===this.sortOrder?-1:1,n=new Map;return(0,o.S6)(e,(function(e,r){n.set(r,t(r))})),e.sort((function(e,t){var r=n.get(e),s=n.get(t);return a*((0,o.kJ)(r)?(0,o.Zr)(r,(function(e,t){return u(e,s[t])})):u(r,s))}))},toggleSort:function(e,t){var r=this;r.sortBy===e?r.sortOrder="asc"===r.sortOrder?"desc":"asc":(r.sortBy=e,r.sortOrder=t||"asc")},toJSON:function(){var e=this;return(0,o.l7)((0,o.ei)(e,(0,o.XP)(i(e).defaults)),{filters:(0,o.l7)({},e.filters),itemCount:e.itemCount})},reset:function(e){var t=this,r=i(t);return delete r.itemCount,e=e||r.defaults,r.callback((function(){(0,o.l7)(t.filters,e.filters)})),(0,o.l7)(t,e)}}),(0,o.aU)(p,"sortBy"),(0,o.aU)(p,"sortOrder"),(0,o.aU)(p,"itemCount",0,(function(e){return i(this).itemCount=e,l(this,this.pageSize,e),e||0})),(0,o.aU)(p,"pageSize",0,(function(e){return l(this,e,this.itemCount),e})),(0,o.aU)(p,"pageIndex",0,(function(e){return Math.max(0,(0,o.Jp)(i(this).itemCount)?e:Math.min(e,this.pageCount-1))})),(0,o.aU)(p,"filters",{},(function(e,t){return(0,o.l7)(t||{},e)}))},5465:function(e){e.exports=JSON.parse('[{"contact":"Paul Thomas","sex":"M","age":43,"state":"OH","productId":"M01-F0024","productType":"Desktop"},{"contact":"Margo Simms","sex":"F","age":37,"state":"WV","productId":"GT13-0024","productType":"Desktop"},{"contact":"Sam Stine","sex":"M","age":26,"state":"PA","productId":"I3670","productType":"Desktop"},{"contact":"Moe Eggert","sex":"M","age":35,"state":"PA","productId":"I3593","productType":"Laptop"},{"contact":"Jessica Elk","sex":"F","age":55,"state":"PA","productId":"15M-ED","productType":"Laptop"},{"contact":"Sally Struthers","sex":"F","age":45,"state":"PA","productId":"GT13-0024","productType":"Desktop"},{"contact":"Michelle Samms","sex":"F","age":46,"state":"OH","productId":"GA401IV","productType":"Laptop"},{"contact":"Mick Roberts","sex":"M","age":23,"state":"OH","productId":"MY2J2LL","productType":"Tablet"},{"contact":"Ed Klondike","sex":"M","age":52,"state":"OH","productId":"81TC00","productType":"Laptop"},{"contact":"Phil Jones","sex":"M","age":56,"state":"WV","productId":"M01-F0024","productType":"Desktop"},{"contact":"Rick James","sex":"M","age":49,"state":"PA","productId":"GA401IV","productType":"Laptop"},{"contact":"Sue Etna","sex":"F","age":54,"state":"OH","productId":"GT13-0024","productType":"Desktop"},{"contact":"Jason Case","sex":"M","age":57,"state":"PA","productId":"81TC00","productType":"Laptop"},{"contact":"Doug Johnson","sex":"M","age":51,"state":"PA","productId":"I3670","productType":"Desktop"},{"contact":"Andy Sands","sex":"M","age":56,"state":"OH","productId":"MY2J2LL","productType":"Tablet"},{"contact":"Kim Collins","sex":"F","age":49,"state":"PA","productId":"I3593","productType":"Laptop"},{"contact":"Edna Sanders","sex":"F","age":46,"state":"OH","productId":"15M-ED","productType":"Laptop"},{"contact":"Michelle Samms","sex":"F","age":46,"state":"NY","productId":"MY2J2LL","productType":"Tablet"},{"contact":"Mick Roberts","sex":"M","age":23,"state":"PA","productId":"I3593","productType":"Laptop"},{"contact":"Sally Struthers","sex":"F","age":45,"state":"NY","productId":"81TC00","productType":"Laptop"},{"contact":"Jason Case","sex":"M","age":57,"state":"PA","productId":"M01-F0024","productType":"Desktop"},{"contact":"Doug Johnson","sex":"M","age":51,"state":"PA","productId":"GA401IV","productType":"Laptop"},{"contact":"Paul Thomas","sex":"M","age":43,"state":"OH","productId":"81TC00","productType":"Laptop"},{"contact":"Margo Simms","sex":"F","age":37,"state":"WV","productId":"Q526FA","productType":"Laptop"},{"contact":"Michelle Samms","sex":"F","age":46,"state":"NY","productId":"I3670","productType":"Desktop"},{"contact":"Mick Roberts","sex":"M","age":23,"state":"PA","productId":"Q526FA","productType":"Laptop"},{"contact":"Ed Klondike","sex":"M","age":52,"state":"OH","productId":"Q526FA","productType":"Laptop"},{"contact":"Moe Eggert","sex":"M","age":35,"state":"PA","productId":"15M-ED","productType":"Laptop"},{"contact":"Jessica Elk","sex":"F","age":55,"state":"PA","productId":"GA401IV","productType":"Laptop"},{"contact":"Phil Jones","sex":"M","age":56,"state":"WV","productId":"M01-F0024","productType":"Desktop"},{"contact":"Rick James","sex":"M","age":49,"state":"PA","productId":"GA401IV","productType":"Laptop"},{"contact":"Sue Etna","sex":"F","age":54,"state":"OH","productId":"GT13-0024","productType":"Desktop"},{"contact":"Kim Collins","sex":"F","age":49,"state":"PA","productId":"I3593","productType":"Laptop"},{"contact":"Edna Sanders","sex":"F","age":46,"state":"OH","productId":"15M-ED","productType":"Laptop"},{"contact":"Michelle Samms","sex":"F","age":46,"state":"NY","productId":"MY2J2LL","productType":"Tablet"},{"contact":"Sally Struthers","sex":"F","age":45,"state":"NY","productId":"81TC00","productType":"Laptop"},{"contact":"Jason Case","sex":"M","age":57,"state":"PA","productId":"M01-F0024","productType":"Desktop"},{"contact":"Doug Johnson","sex":"M","age":51,"state":"PA","productId":"GA401IV","productType":"Laptop"},{"contact":"Moe Eggert","sex":"M","age":35,"state":"PA","productId":"I3593","productType":"Laptop"}]')}}]);