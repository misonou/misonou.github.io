"use strict";(self.webpackChunkbrewjs_for_react_router_example=self.webpackChunkbrewjs_for_react_router_example||[]).push([[729],{729:function(e,n,t){t.r(n);var s=t(2556);function o(e){const n=Object.assign({h1:"h1",del:"del",p:"p",blockquote:"blockquote",code:"code",pre:"pre",h2:"h2",h3:"h3",h4:"h4"},e.components),{Module:t,Badge:o}=n;return o||c("Badge",!1),o.Optional||c("Badge.Optional",!0),t||c("Module",!0),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t,{name:"zeta-dom-react"}),"\n",(0,s.jsxs)(n.h1,{children:["useSingleton ",(0,s.jsx)(n.del,{children:"0.4.6"})]}),"\n",(0,s.jsx)(n.p,{children:"Makes sure the dispose callback only gets called once when component is unmounted."}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.p,{children:["Since React 18 ",(0,s.jsx)(n.code,{children:"useEffect"})," always gets executed twice in development strict mode.\r\nThis may cause issues for singleton objects that they are cleaned up before actual component life cycle.\r\nThis hook ensures the cleanup callback will only be invoked exactly once after the component has unmounted."]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"const singleton = useState(factory)[0];\r\nuseEffect(() => {\r\n    return () => {\r\n        // the `dispose` method will actually be called\r\n        // when component is being first mounted in development strict mode,\r\n        // so the internal state will be invalid when component is rerendered.\r\n        singleton.dispose();\r\n    };\r\n}, [singleton]);\r\n// instead this will be safe\r\nconst singleton = useSingleton(factory);\n"})}),"\n",(0,s.jsx)(n.h2,{children:"Syntax"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"useSingleton(factory)\r\nuseSingleton(factory, onDispose)\n"})}),"\n",(0,s.jsx)(n.h3,{children:"Parameters"}),"\n",(0,s.jsxs)("dl",{children:[(0,s.jsx)(n.h4,{children:(0,s.jsx)(n.code,{children:"factory"})}),(0,s.jsx)(n.p,{children:"A callback that returns a singleton object."}),(0,s.jsxs)(n.h4,{children:[(0,s.jsx)(n.code,{children:"onDispose"})," ",(0,s.jsx)(o.Optional,{})]}),(0,s.jsxs)(n.p,{children:["Callback to be invoked when component has unmounted.\r\nIf unspecified, it will call ",(0,s.jsx)(n.code,{children:"dispose"})," method on the object if there exists usch method."]})]}),"\n",(0,s.jsx)(n.h3,{children:"Return value"}),"\n",(0,s.jsxs)(n.p,{children:["The object returned from the ",(0,s.jsx)(n.code,{children:"factory"})," callback."]})]})}function c(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}n.default=function(e={}){const{wrapper:n}=e.components||{};return n?(0,s.jsx)(n,Object.assign({},e,{children:(0,s.jsx)(o,e)})):o(e)}}}]);