"use strict";(self.webpackChunkbrewjs_for_react_router_example=self.webpackChunkbrewjs_for_react_router_example||[]).push([[4376],{4376:function(e,s,r){r.r(s);var n=r(2556);function c(e){const s=Object.assign({h1:"h1",p:"p",h2:"h2",pre:"pre",code:"code",h3:"h3",h4:"h4",ul:"ul",li:"li",blockquote:"blockquote",a:"a"},e.components),{Module:r,MemberList:c}=s;return c||a("MemberList",!0),r||a("Module",!0),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r,{name:"brew-js"}),"\n",(0,n.jsx)(s.h1,{children:"createObjectStorage"}),"\n",(0,n.jsx)(s.p,{children:"Creates a storage that enables serializing and deserializing complex object structures."}),"\n",(0,n.jsx)(s.h2,{children:"Syntax"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-javascript",children:"createObjectStorage(storage, key)\n"})}),"\n",(0,n.jsx)(s.h3,{children:"Parameters"}),"\n",(0,n.jsxs)("dl",{children:[(0,n.jsx)(s.h4,{children:(0,n.jsx)(s.code,{children:"storage"})}),(0,n.jsxs)(s.p,{children:["The ",(0,n.jsx)(s.code,{children:"window.sessionStorage"})," or ",(0,n.jsx)(s.code,{children:"window.localStorage"})," object."]}),(0,n.jsx)(s.h4,{children:(0,n.jsx)(s.code,{children:"key"})}),(0,n.jsx)(s.p,{children:"Key used for saving data to backing storage."})]}),"\n",(0,n.jsx)(s.h2,{children:"Object and circular references"}),"\n",(0,n.jsx)(s.p,{children:"Object references are maintained and circular references are supported."}),"\n",(0,n.jsx)(s.h2,{children:"Limitations"}),"\n",(0,n.jsx)(s.p,{children:"All limitations with native JSON serialization applies (except for circular references):"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:"Properties with symbols as keys are not serialized"}),"\n",(0,n.jsx)(s.li,{children:"Properties with functions as values are not serialized"}),"\n",(0,n.jsxs)(s.li,{children:["Date objects are serialized as time strings (because of ",(0,n.jsx)(s.code,{children:"Date.prototype.toJSON"}),")"]}),"\n"]}),"\n",(0,n.jsx)(s.p,{children:"In addition, properties with these values are also ignored, due to commonly large amount of data:"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:[(0,n.jsx)(s.code,{children:"Blob"})," objects"]}),"\n",(0,n.jsx)(s.li,{children:"DOM nodes, i.e. elements and text nodes"}),"\n",(0,n.jsxs)(s.li,{children:["the ",(0,n.jsx)(s.code,{children:"window"})," object"]}),"\n"]}),"\n",(0,n.jsxs)(s.blockquote,{children:["\n",(0,n.jsx)(s.p,{children:"It is recommended to only store strings, numbers and booleans values, as well as objects and arrays containing only these values."}),"\n"]}),"\n",(0,n.jsx)(s.h2,{children:"Persisting nested object"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-typescript",children:"let storage = app.historyStorage.current;\r\nlet data = storage.get('data');\r\nlet nested = data.obj;\r\n\r\nnested.a = 1;\r\nstorage.persist(nested);\n"})}),"\n",(0,n.jsx)(s.h2,{children:"ObjectStorage interface"}),"\n",(0,n.jsx)(c,{i:"ObjectStorage",im:["keys()","has()","revive()","get()","set()","persist()","delete()","clear()"]}),"\n",(0,n.jsx)(s.h3,{children:(0,n.jsx)(s.code,{children:"ObjectStorage.keys()"})}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-javascript",children:"storage.keys()\n"})}),"\n",(0,n.jsx)(s.p,{children:"Gets all keys present in storage."}),"\n",(0,n.jsx)(s.h3,{children:(0,n.jsx)(s.code,{children:"ObjectStorage.has()"})}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-javascript",children:"storage.has(key)\n"})}),"\n",(0,n.jsx)(s.p,{children:"Gets whether the specified key is present in storage."}),"\n",(0,n.jsx)(s.h3,{children:"Parameters"}),"\n",(0,n.jsx)("dl",{children:(0,n.jsx)(s.h4,{children:(0,n.jsx)(s.code,{children:"key"})})}),"\n",(0,n.jsx)(s.h3,{children:(0,n.jsx)(s.code,{children:"ObjectStorage.revive()"})}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-javascript",children:"storage.revive(key, callback)\n"})}),"\n",(0,n.jsx)(s.p,{children:"Restores non-primitive objects from storage."}),"\n",(0,n.jsxs)(s.p,{children:["Unlike ",(0,n.jsx)(s.a,{href:":",children:(0,n.jsx)(s.code,{children:"ObjectStorage.get"})}),", if the same key has been restored before,\r\nthe previous object will be purged."]}),"\n",(0,n.jsx)(s.h3,{children:"Parameters"}),"\n",(0,n.jsxs)("dl",{children:[(0,n.jsx)(s.h4,{children:(0,n.jsx)(s.code,{children:"key"})}),(0,n.jsx)(s.p,{children:"A key associated to specific data."}),(0,n.jsx)(s.h4,{children:(0,n.jsx)(s.code,{children:"callback"})}),(0,n.jsx)(s.p,{children:"Callback to construct result object, receiving deserialized JSON data as the first argument."})]}),"\n",(0,n.jsx)(s.h3,{children:(0,n.jsx)(s.code,{children:"ObjectStorage.get()"})}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-javascript",children:"storage.get(key)\n"})}),"\n",(0,n.jsx)(s.p,{children:"Gets data from the storage."}),"\n",(0,n.jsx)(s.h3,{children:"Parameters"}),"\n",(0,n.jsxs)("dl",{children:[(0,n.jsx)(s.h4,{children:(0,n.jsx)(s.code,{children:"key"})}),(0,n.jsx)(s.p,{children:"A key associated to specific data."})]}),"\n",(0,n.jsx)(s.h3,{children:(0,n.jsx)(s.code,{children:"ObjectStorage.set()"})}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-javascript",children:"storage.set(key, value)\n"})}),"\n",(0,n.jsx)(s.p,{children:"Persists data to storage."}),"\n",(0,n.jsxs)(s.p,{children:["Objects are serialized to JSON notation, therefore it has the same limitations as ",(0,n.jsx)(s.code,{children:"JSON.stringify"})," when\r\nstoring non-primitive objects. This can partially overcome by having ",(0,n.jsx)(s.code,{children:"toJSON"})," method on objects to serialize\r\nas JSON object structures and be later recovered by ",(0,n.jsx)(s.a,{href:":",children:(0,n.jsx)(s.code,{children:"ObjectStorage.revive"})}),"."]}),"\n",(0,n.jsxs)(s.p,{children:["Circular references are supported and are maintained when deserialized back from storage.\r\nOn the other hand, certain built-in objects are ignored, such as ",(0,n.jsx)(s.code,{children:"Blob"})," data, DOM elements and the ",(0,n.jsx)(s.code,{children:"window"})," object."]}),"\n",(0,n.jsx)(s.h3,{children:"Parameters"}),"\n",(0,n.jsxs)("dl",{children:[(0,n.jsx)(s.h4,{children:(0,n.jsx)(s.code,{children:"key"})}),(0,n.jsx)(s.p,{children:"A key associated to specific data."}),(0,n.jsx)(s.h4,{children:(0,n.jsx)(s.code,{children:"value"})}),(0,n.jsx)(s.p,{children:"Data to be stored."})]}),"\n",(0,n.jsx)(s.h3,{children:(0,n.jsx)(s.code,{children:"ObjectStorage.persist()"})}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-javascript",children:"storage.persist(obj)\n"})}),"\n",(0,n.jsx)(s.p,{children:"Marks object as dirty and updates backing storage asynchronously."}),"\n",(0,n.jsxs)(s.p,{children:["It has no effects for objects not restored by ",(0,n.jsx)(s.a,{href:":",children:(0,n.jsx)(s.code,{children:"ObjectStorage.get"})})," or ",(0,n.jsx)(s.a,{href:":",children:(0,n.jsx)(s.code,{children:"ObjectStorage.revive"})}),",\r\nor persisted by ",(0,n.jsx)(s.a,{href:":",children:(0,n.jsx)(s.code,{children:"ObjectStorage.set"})}),"."]}),"\n",(0,n.jsx)(s.h3,{children:"Parameters"}),"\n",(0,n.jsxs)("dl",{children:[(0,n.jsx)(s.h4,{children:(0,n.jsx)(s.code,{children:"obj"})}),(0,n.jsx)(s.p,{children:"Object needed to have updates persisted."})]}),"\n",(0,n.jsx)(s.h3,{children:(0,n.jsx)(s.code,{children:"ObjectStorage.delete()"})}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-javascript",children:"storage.delete(key)\n"})}),"\n",(0,n.jsx)(s.p,{children:"Removes data from storage."}),"\n",(0,n.jsx)(s.h3,{children:"Parameters"}),"\n",(0,n.jsxs)("dl",{children:[(0,n.jsx)(s.h4,{children:(0,n.jsx)(s.code,{children:"key"})}),(0,n.jsx)(s.p,{children:"A key associated to specific data."})]}),"\n",(0,n.jsx)(s.h3,{children:(0,n.jsx)(s.code,{children:"ObjectStorage.clear()"})}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-javascript",children:"storage.clear()\n"})}),"\n",(0,n.jsx)(s.p,{children:"Clears all data present in storage."})]})}function a(e,s){throw new Error("Expected "+(s?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}s.default=function(e={}){const{wrapper:s}=e.components||{};return s?(0,n.jsx)(s,Object.assign({},e,{children:(0,n.jsx)(c,e)})):c(e)}}}]);