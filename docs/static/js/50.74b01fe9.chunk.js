"use strict";(self.webpackChunkbrewjs_for_react_router_example=self.webpackChunkbrewjs_for_react_router_example||[]).push([[50],{50:function(t,e,a){a.r(e),a.d(e,{default:function(){return I}});var r=a(2556),n=a(882),o=a(6502),s=a(6122),c=a(2192),d=a(7749),p=a(5465),i=function(){return i=Object.assign||function(t){for(var e,a=1,r=arguments.length;a<r;a++)for(var n in e=arguments[a])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},i.apply(this,arguments)},u=p.filter((function(t){return"Laptop"===t.productType})),l=p.filter((function(t){return"Tablet"===t.productType}));function g(){var t=(0,s.n7)("tab","Laptop",!0),e=t[0],a=t[1],p=(0,n.N)("dv".concat(e),{},"contact","asc",10),g="Laptop"===e?u:l,m=p.getView(g)[0];function h(t){return p.sortBy===t?(0,o.AK)({sort:p.sortOrder}):""}return(0,r.jsxs)("div",{children:[(0,r.jsx)(c.th,{items:["Laptop","Tablet"],onChange:a}),(0,r.jsxs)("table",i({className:"app-demo-view-table"},{children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",i({className:h("contact"),onClick:function(){return p.toggleSort("contact")}},{children:"Name"})),(0,r.jsx)("th",i({className:h("productId"),onClick:function(){return p.toggleSort("productId")}},{children:"Product ID"})),(0,r.jsx)("th",i({className:h("productType"),onClick:function(){return p.toggleSort("productType")}},{children:"Product Type"}))]})}),(0,r.jsx)("tbody",{children:m.map((function(t,e){return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:t.contact}),(0,r.jsx)("td",{children:t.productId}),(0,r.jsx)("td",{children:t.productType})]},e)}))})]})),(0,r.jsxs)("div",i({className:"table-footer"},{children:[(0,r.jsxs)("div",{children:[p.itemCount," items"]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("i",i({className:(0,o.AK)({disabled:0===p.pageIndex}),onClick:function(){return p.pageIndex--}},{children:"Prev"})),(0,d.rx)(" ",p.pageCount).split("").map((function(t,e){return(0,r.jsx)("i",i({className:(0,o.AK)({active:e===p.pageIndex}),onClick:function(){return p.pageIndex=e}},{children:e+1}),e)})),(0,r.jsx)("i",i({className:(0,o.AK)({disabled:p.pageIndex===p.pageCount-1}),onClick:function(){return p.pageIndex++}},{children:"Next"}))]})]}))]})}var m="import { classNames, useDataView } from \"zeta-dom-react\";\r\nimport { useRouteState } from \"brew-js-react\";\r\nimport { ToggleButtonGroup } from \"src/components/controls\";\r\nimport { repeat } from \"zeta-dom/util\";\r\nimport data from \"src/data/examples/sales.json\";\r\nimport \"./style.css\";\r\n\r\nconst laptopData = data.filter(v => v.productType === 'Laptop');\r\nconst tabletData = data.filter(v => v.productType === 'Tablet');\r\n\r\nexport default function Component() {\r\n    const [tab, setTab] = useRouteState('tab', 'Laptop', true);\r\n\r\n    const dataView = useDataView(`dv${tab}`, {}, 'contact', 'asc', 10);\r\n    const items = tab === 'Laptop' ? laptopData : tabletData;\r\n    const [pagedItems] = dataView.getView(items);\r\n\r\n    function getSortClassNames(column: string) {\r\n        return dataView.sortBy === column ? classNames({ sort: dataView.sortOrder }) : '';\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <ToggleButtonGroup items={['Laptop', 'Tablet']} onChange={setTab} />\r\n\r\n            <table className=\"app-demo-view-table\">\r\n                <thead>\r\n                    <tr>\r\n                        <th className={getSortClassNames('contact')} onClick={() => dataView.toggleSort('contact')}>Name</th>\r\n                        <th className={getSortClassNames('productId')} onClick={() => dataView.toggleSort('productId')}>Product ID</th>\r\n                        <th className={getSortClassNames('productType')} onClick={() => dataView.toggleSort('productType')}>Product Type</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    {pagedItems.map((v, i) => (\r\n                        <tr key={i}>\r\n                            <td>{v.contact}</td>\r\n                            <td>{v.productId}</td>\r\n                            <td>{v.productType}</td>\r\n                        </tr>\r\n                    ))}\r\n                </tbody>\r\n            </table>\r\n\r\n            {/* Simple pagination */}\r\n            <div className=\"table-footer\">\r\n                <div>{dataView.itemCount} items</div>\r\n                <div>\r\n                    <i className={classNames({ disabled: dataView.pageIndex === 0 })} onClick={() => dataView.pageIndex--}>Prev</i>\r\n                    {repeat(' ', dataView.pageCount).split('').map((v, i) => (\r\n                        <i key={i} className={classNames({ active: i === dataView.pageIndex })} onClick={() => dataView.pageIndex = i}>{i + 1}</i>\r\n                    ))}\r\n                    <i className={classNames({ disabled: dataView.pageIndex === dataView.pageCount - 1 })} onClick={() => dataView.pageIndex++}>Next</i>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n",h=a(9596);function x(){return(0,r.jsx)(h.iV,{component:g,source:{tsx:m},maxHeight:"none"})}function f(t){const e=Object.assign({h1:"h1",p:"p",a:"a",code:"code",h2:"h2",pre:"pre"},t.components),{Module:a}=e;return a||function(t,e){throw new Error("Expected "+(e?"component":"object")+" `"+t+"` to be defined: you likely forgot to import, pass, or provide it.")}("Module",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a,{name:"zeta-dom-react"}),"\n",(0,r.jsx)(e.h1,{children:"Multiple data views"}),"\n",(0,r.jsx)(e.p,{children:"There are scenarios that multiple data sources are displayed in a single page."}),"\n",(0,r.jsxs)(e.p,{children:["In such cases, assign a unique persisting key for each data source as the first argument\r\nwhen using ",(0,r.jsx)(e.a,{href:":",children:(0,r.jsx)(e.code,{children:"useDataView"})}),", such that it knows when to\r\npersist and restore the current view."]}),"\n",(0,r.jsx)(e.h2,{children:"Multiple views"}),"\n",(0,r.jsx)(e.p,{children:"Same data source can be splitted into different views:"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-tsx",children:"function Component() {\r\n    const items = [/* ... */];\r\n\r\n    const dv1 = useDataView('dv1', {});\r\n    const [pagedItems1] = dv1.getView(items);\r\n\r\n    const dv2 = useDataView('dv2', {});\r\n    const [pagedItems2] = dv2.getView(items);\r\n\r\n    /* ... */\r\n}\n"})}),"\n",(0,r.jsx)(e.h2,{children:"Switching data in a single view"}),"\n",(0,r.jsx)(e.p,{children:"By associating a unique persisting key to each data source, the switching of state associated to each data\r\nsource are automatically handled."}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-tsx",children:"function Component() {\r\n    const items1 = [/* ... */];\r\n    const items2 = [/* ... */];\r\n    const [tab, setTab] = useState(0);\r\n\r\n    const dv = useDataView(`dv${tab}`, {});\r\n    const items = tab === 0 ? items1 : items2;\r\n    const [pagedItems] = dv.getView(items);\r\n\r\n    /* ... */\r\n}\n"})}),"\n",(0,r.jsx)(x,{})]})}var I=function(t={}){const{wrapper:e}=t.components||{};return e?(0,r.jsx)(e,Object.assign({},t,{children:(0,r.jsx)(f,t)})):f(t)}},882:function(t,e,a){a.d(e,{N:function(){return m}});var r=a(4519),n=a(6770),o=a(7749),s=a(1266),c=a(2674),d=(0,o.D8)(),p=g.prototype,i=new n.pF;function u(t,e){var a=(0,o.Jp)(t)&&-1,r=(0,o.Jp)(e)&&1;return a||r?a+r:"string"===typeof t||"string"===typeof e?String(t).localeCompare(e,void 0,{caseFirst:"upper"}):t-e}function l(t,e,a){d(t).setPageCount(Math.ceil(a/(e||a||1)))}function g(t,e,a,r){var n=this,s={filters:(0,o.l7)({},t),sortBy:e,sortOrder:a||e&&"asc",itemCount:null,pageIndex:0,pageSize:void 0===r?g.pageSize:r},c=d(n,{setPageCount:(0,o.aU)(n,"pageCount",0,!0),defaults:s,items:[]}),p=function(){i.emit("viewChange",n)},u=function(t){var e=this!==n,a=e||(0,o.Zr)(t.newValues,(function(t,e){return"pageCount"!==e&&"itemCount"!==e}));c.sorted=c.items.length?void 0:[],e&&(c.filtered=c.sorted),n.pageIndex=e||!(0,o.nr)(t.newValues,"pageIndex")?0:n.pageIndex,a&&(0,o.lb)(p)};t=(0,o.l7)(n,s).filters;for(var l in c.callback=(0,o.YP)(t,!1),(0,o.YP)(n,u),(0,o.YP)(n.filters,u),t)(0,o.aU)(t,l);(0,o.vV)(t)}function m(t,e,a,n,d){if("string"!==typeof t)return m("__dataView",t,e,a,n);var p=(0,c.F)(t),i=(0,s.Rk)(),u=(0,r.useState)((function(){return new g(e,a,n,d).reset(p.get())}))[0];return(0,r.useEffect)((function(){return(0,o.kV)(u.on("viewChange",(function(){p.set(u.toJSON()),i()})),p.onPopState?p.onPopState((function(t){p.set(u.toJSON()),u.reset(t)})):o.ZT)}),[u]),u}(0,o.Ou)(g,{pageSize:0}),(0,o.r9)(g,{on:function(t,e){return i.add(this,t,e)},getView:function(t,e){var a=this,r=d(a),n=a.pageIndex||0,o=a.pageSize||0;t!==r.items&&(r.items=t||[],r.filtered=r.items.length?void 0:[],r.sorted=r.filtered),e=e||function(t){return a.sort(t)};var s=r.sorted||(r.sorted=e.call(a,r.filtered||r.items,a.filters,a.sortBy,a.sortOrder)||[]);return r.filtered=s,t&&(a.itemCount=s.length),[s.slice(n*o,o?(n+1)*o:void 0),s.length]},sort:function(t,e){if(t=(0,o.VL)(t),!(0,o.mf)(e)){var a=e||this.sortBy;if(!a)return t;e=function(t){return t[a]}}var r="desc"===this.sortOrder?-1:1,n=new Map;return(0,o.S6)(t,(function(t,a){n.set(a,e(a))})),t.sort((function(t,e){var a=n.get(t),s=n.get(e);return r*((0,o.kJ)(a)?(0,o.Zr)(a,(function(t,e){return u(t,s[e])})):u(a,s))}))},toggleSort:function(t,e){var a=this;a.sortBy===t?a.sortOrder="asc"===a.sortOrder?"desc":"asc":(a.sortBy=t,a.sortOrder=e||"asc")},toJSON:function(){var t=this;return(0,o.l7)((0,o.ei)(t,(0,o.XP)(d(t).defaults)),{filters:(0,o.l7)({},t.filters),itemCount:t.itemCount})},reset:function(t){var e=this,a=d(e);return delete a.itemCount,t=t||a.defaults,a.callback((function(){(0,o.l7)(e.filters,t.filters)})),(0,o.l7)(e,t)}}),(0,o.aU)(p,"sortBy"),(0,o.aU)(p,"sortOrder"),(0,o.aU)(p,"itemCount",0,(function(t){return d(this).itemCount=t,l(this,this.pageSize,t),t||0})),(0,o.aU)(p,"pageSize",0,(function(t){return l(this,t,this.itemCount),t})),(0,o.aU)(p,"pageIndex",0,(function(t){return Math.max(0,(0,o.Jp)(d(this).itemCount)?t:Math.min(t,this.pageCount-1))})),(0,o.aU)(p,"filters",{},(function(t,e){return(0,o.l7)(e||{},t)}))},5465:function(t){t.exports=JSON.parse('[{"contact":"Paul Thomas","sex":"M","age":43,"state":"OH","productId":"M01-F0024","productType":"Desktop"},{"contact":"Margo Simms","sex":"F","age":37,"state":"WV","productId":"GT13-0024","productType":"Desktop"},{"contact":"Sam Stine","sex":"M","age":26,"state":"PA","productId":"I3670","productType":"Desktop"},{"contact":"Moe Eggert","sex":"M","age":35,"state":"PA","productId":"I3593","productType":"Laptop"},{"contact":"Jessica Elk","sex":"F","age":55,"state":"PA","productId":"15M-ED","productType":"Laptop"},{"contact":"Sally Struthers","sex":"F","age":45,"state":"PA","productId":"GT13-0024","productType":"Desktop"},{"contact":"Michelle Samms","sex":"F","age":46,"state":"OH","productId":"GA401IV","productType":"Laptop"},{"contact":"Mick Roberts","sex":"M","age":23,"state":"OH","productId":"MY2J2LL","productType":"Tablet"},{"contact":"Ed Klondike","sex":"M","age":52,"state":"OH","productId":"81TC00","productType":"Laptop"},{"contact":"Phil Jones","sex":"M","age":56,"state":"WV","productId":"M01-F0024","productType":"Desktop"},{"contact":"Rick James","sex":"M","age":49,"state":"PA","productId":"GA401IV","productType":"Laptop"},{"contact":"Sue Etna","sex":"F","age":54,"state":"OH","productId":"GT13-0024","productType":"Desktop"},{"contact":"Jason Case","sex":"M","age":57,"state":"PA","productId":"81TC00","productType":"Laptop"},{"contact":"Doug Johnson","sex":"M","age":51,"state":"PA","productId":"I3670","productType":"Desktop"},{"contact":"Andy Sands","sex":"M","age":56,"state":"OH","productId":"MY2J2LL","productType":"Tablet"},{"contact":"Kim Collins","sex":"F","age":49,"state":"PA","productId":"I3593","productType":"Laptop"},{"contact":"Edna Sanders","sex":"F","age":46,"state":"OH","productId":"15M-ED","productType":"Laptop"},{"contact":"Michelle Samms","sex":"F","age":46,"state":"NY","productId":"MY2J2LL","productType":"Tablet"},{"contact":"Mick Roberts","sex":"M","age":23,"state":"PA","productId":"I3593","productType":"Laptop"},{"contact":"Sally Struthers","sex":"F","age":45,"state":"NY","productId":"81TC00","productType":"Laptop"},{"contact":"Jason Case","sex":"M","age":57,"state":"PA","productId":"M01-F0024","productType":"Desktop"},{"contact":"Doug Johnson","sex":"M","age":51,"state":"PA","productId":"GA401IV","productType":"Laptop"},{"contact":"Paul Thomas","sex":"M","age":43,"state":"OH","productId":"81TC00","productType":"Laptop"},{"contact":"Margo Simms","sex":"F","age":37,"state":"WV","productId":"Q526FA","productType":"Laptop"},{"contact":"Michelle Samms","sex":"F","age":46,"state":"NY","productId":"I3670","productType":"Desktop"},{"contact":"Mick Roberts","sex":"M","age":23,"state":"PA","productId":"Q526FA","productType":"Laptop"},{"contact":"Ed Klondike","sex":"M","age":52,"state":"OH","productId":"Q526FA","productType":"Laptop"},{"contact":"Moe Eggert","sex":"M","age":35,"state":"PA","productId":"15M-ED","productType":"Laptop"},{"contact":"Jessica Elk","sex":"F","age":55,"state":"PA","productId":"GA401IV","productType":"Laptop"},{"contact":"Phil Jones","sex":"M","age":56,"state":"WV","productId":"M01-F0024","productType":"Desktop"},{"contact":"Rick James","sex":"M","age":49,"state":"PA","productId":"GA401IV","productType":"Laptop"},{"contact":"Sue Etna","sex":"F","age":54,"state":"OH","productId":"GT13-0024","productType":"Desktop"},{"contact":"Kim Collins","sex":"F","age":49,"state":"PA","productId":"I3593","productType":"Laptop"},{"contact":"Edna Sanders","sex":"F","age":46,"state":"OH","productId":"15M-ED","productType":"Laptop"},{"contact":"Michelle Samms","sex":"F","age":46,"state":"NY","productId":"MY2J2LL","productType":"Tablet"},{"contact":"Sally Struthers","sex":"F","age":45,"state":"NY","productId":"81TC00","productType":"Laptop"},{"contact":"Jason Case","sex":"M","age":57,"state":"PA","productId":"M01-F0024","productType":"Desktop"},{"contact":"Doug Johnson","sex":"M","age":51,"state":"PA","productId":"GA401IV","productType":"Laptop"},{"contact":"Moe Eggert","sex":"M","age":35,"state":"PA","productId":"I3593","productType":"Laptop"}]')}}]);