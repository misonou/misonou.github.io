"use strict";(self.webpackChunkbrewjs_for_react_router_example=self.webpackChunkbrewjs_for_react_router_example||[]).push([[888],{888:function(e,n,r){r.r(n),r.d(n,{default:function(){return m}});var t=r(2556),i=r(6502),s=r(3967),l={position:"relative",width:200,height:200},c={position:"absolute",width:100,height:100,backgroundColor:"aquamarine",touchAction:"none"},a=function(){return a=Object.assign||function(e){for(var n,r=1,t=arguments.length;r<t;r++)for(var i in n=arguments[r])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},a.apply(this,arguments)};function o(){return(0,t.jsx)("div",a({style:l},{children:(0,t.jsx)("div",{ref:(0,i.Ht)({touchstart:function(e){var n=e.currentTarget,r=new DOMMatrixReadOnly(getComputedStyle(n).transform);1===e.originalEvent.touches.length?(0,s.fM)((function(e,t,i,s){n.style.transform=new DOMMatrix([1,0,0,1,i,s]).multiplySelf(r).toString()})):(0,s.Gj)((function(e,t,i,s){n.style.transform=new DOMMatrix([1,0,0,1,i,s]).multiplySelf(r).rotateSelf(0,0,e).scaleSelf(t).toString()}));e.preventDefault()}}),style:c})}))}var d='import { domEventRef } from "zeta-dom-react";\r\nimport { beginDrag, beginPinchZoom } from "zeta-dom/dom";\r\nimport { containerStyle, squareStyle } from "./style";\r\n\r\nexport default function Component() {\r\n    return (\r\n        <div style={containerStyle}>\r\n            <div ref={domEventRef({ touchstart })} style={squareStyle}></div>\r\n        </div>\r\n    );\r\n\r\n    function touchstart(e: Zeta.ZetaTouchEvent<HTMLDivElement>) {\r\n        const element = e.currentTarget;\r\n        const initial = new DOMMatrixReadOnly(getComputedStyle(element).transform);\r\n        if (e.originalEvent.touches.length === 1) {\r\n            beginDrag((x, y, dx, dy) => {\r\n                element.style.transform = new DOMMatrix([1, 0, 0, 1, dx, dy])\r\n                    .multiplySelf(initial)\r\n                    .toString();\r\n            });\r\n        } else {\r\n            beginPinchZoom((deg, scale, tx, ty) => {\r\n                element.style.transform = new DOMMatrix([1, 0, 0, 1, tx, ty])\r\n                    .multiplySelf(initial)\r\n                    .rotateSelf(0, 0, deg)\r\n                    .scaleSelf(scale).toString();\r\n            });\r\n        }\r\n        e.preventDefault();\r\n    }\r\n}\r\n',h=r(8137);function x(){return(0,t.jsx)(h.iV,{component:o,source:{tsx:d}})}function u(e){const n=Object.assign({h1:"h1",h2:"h2",pre:"pre",code:"code",h3:"h3",h4:"h4",p:"p",ul:"ul",li:"li",blockquote:"blockquote",a:"a"},e.components),{Module:r}=n;return r||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Module",!0),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r,{name:"zeta-dom/dom"}),"\n",(0,t.jsx)(n.h1,{children:"beginPinchZoom"}),"\n",(0,t.jsx)(n.h2,{children:"Syntax"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"beginPinchZoom(callback)\n"})}),"\n",(0,t.jsx)(n.h3,{children:"Parameters"}),"\n",(0,t.jsxs)("dl",{children:[(0,t.jsx)(n.h4,{children:(0,t.jsx)(n.code,{children:"callback"})}),(0,t.jsxs)(n.p,{children:["A callback that receives four arguments ",(0,t.jsx)(n.code,{children:"deg, scale, tx, ty"})," when pointer is moving where"]}),(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"deg"}),": angle of rotation in degrees"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"scale"}),": scaling factor"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"tx"}),": translation in X-direction in pixels"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"ty"}),": translation in Y-direction in pixels"]}),"\n"]}),(0,t.jsx)(n.p,{children:"A 2D transform matrix can be created by:"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"const rad = deg * Math.PI / 180;\nconst matrix = new DOMMatrix([\n  Math.cos(rad) * scale,\n  Math.sin(rad) * scale,\n  -Math.sin(rad) * scale,\n  Math.cos(rad) * scale,\n  tx,\n  ty,\n]);\n"})}),(0,t.jsx)(n.p,{children:"or equivalently:"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"new DOMMatrix()\n  .translateSelf(tx, ty)\n  .scaleSelf(scale)\n  .rotateSelf(0, 0, deg)\n"})})]}),"\n",(0,t.jsx)(n.h3,{children:"Return value"}),"\n",(0,t.jsx)(n.p,{children:"A promise object that fulfills when user completed the gesture."}),"\n",(0,t.jsx)(n.h2,{children:"Example"}),"\n",(0,t.jsx)(n.p,{children:"Try drag, rotate and resize the square in touch device."}),"\n",(0,t.jsx)(x,{}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["Note that how the transform matrix is multiplied in subsequent action:\nthe initial matrix (",(0,t.jsx)("math",{children:(0,t.jsxs)("msub",{children:[(0,t.jsx)("mi",{children:"M"}),(0,t.jsx)("mn",{children:"0"})]})}),") should be sandwiched between\ntranslation (",(0,t.jsx)("math",{children:(0,t.jsxs)("msub",{children:[(0,t.jsx)("mi",{children:"M"}),(0,t.jsx)("mn",{children:"\u0394x,y"})]})}),") and rotation and scaling\n(",(0,t.jsx)("math",{children:(0,t.jsxs)("msub",{children:[(0,t.jsx)("mi",{children:"M"}),(0,t.jsx)("mn",{children:"r\u03b8"})]})}),")"]}),"\n",(0,t.jsxs)("math",{display:"block",children:[(0,t.jsxs)("msub",{children:[(0,t.jsx)("mi",{children:"M"}),(0,t.jsx)("mn",{children:"\u0394x,y"})]}),"\n",(0,t.jsxs)("msub",{children:[(0,t.jsx)("mi",{children:"M"}),(0,t.jsx)("mn",{children:"0"})]}),"\n",(0,t.jsxs)("msub",{children:[(0,t.jsx)("mi",{children:"M"}),(0,t.jsx)("mn",{children:"r\u03b8"})]})]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{children:"See also"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:":",children:(0,t.jsx)(n.code,{children:"beginDrag"})})}),"\n"]})]})}var m=function(e={}){const{wrapper:n}=e.components||{};return n?(0,t.jsx)(n,Object.assign({},e,{children:(0,t.jsx)(u,e)})):u(e)}}}]);