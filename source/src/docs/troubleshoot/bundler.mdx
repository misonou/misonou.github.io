# Build-time issues

Here listed major known issues over different versions, listing affected versions and possible workaround.

## Unable to resolve submodules of zeta-dom and brew-js

~~zeta-dom &lt;=0.5.1~~ ~~brew-js &lt;=0.6.5~~

### WebPack 5

```text
Module not found: Error: Can't resolve 'zeta-dom/util' in '[xxx]'
Did you mean to import zeta-dom/util.js?
BREAKING CHANGE: The request 'zeta-dom/util' failed to resolve only because it was resolved as fully specified
```

When using newer version of WebPack, the following WebPack rule is required:

```javascript
module.exports = {
    /* ... */
    module: {
        rules: [
            {
                test: /\.m?js/,
                resolve: {
                    fullySpecified: false
                }
            }
        ]
    }
}
```

Use [`react-app-rewired`](https://www.npmjs.com/package/react-app-rewired) or [`craco`](https://craco.js.org/) to customize when using `create-react-app`.

### @rollup

Use the `@rollup/plugin-alias` plugin:

```javascript
import alias from '@rollup/plugin-alias';
export default {
    /* ... */
    plugins: [
        alias({
            entries: {
                'zeta-dom': './node_modules/zeta-dom',
                'brew-js': './node_modules/brew-js'
            }
        })
    ]
}
```

In case of Vite, add the `resolve.alias` option:

```javascript
export default {
    /* ... */
    resolve: {
        alias: {
            'zeta-dom': './node_modules/zeta-dom',
            'brew-js': './node_modules/brew-js'
        }
    }
}
```

## Failed to compile in HMR mode

~~brew-js &lt;=0.4.7~~ ~~brew-js-react &lt;=0.3.1~~

Due to certain version of `react-refresh` failed to correctly infer JS file with extension `.js` whether it is `commonjs` or `esm` file, the following error will occured when running `npm start` or `yarn start`

```text
Failed to compile.

node_modules/brew-js/include/external/jquery.js 2:28
Module parse failed: Unexpected token (2:28)
File was processed with these loaders:

./node_modules/@pmmmwh/react-refresh-webpack-plugin/loader/index.js
You may need an additional loader to handle the result of these loaders.
```

To fix the issue, upgrade `brew-js` to `0.4.8` and `brew-js-react` to `0.3.2`.
